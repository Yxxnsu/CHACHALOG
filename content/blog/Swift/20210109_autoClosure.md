---
title: 'π• [Swift] μ¤ν†  ν΄λ΅μ €'
date: 2021-01-09 23:50:00
category: 'Swift'
draft: false
showToc: true
---

```swift
func random() -> Int {
   return Int.random(in: 0...100)
}

func takeResult(param: Int) {
   print(param)
}

takeResult(param: random())
// λλ¤ μ •μλ¥Ό λ¦¬ν„΄
```

μƒλ‹¨ `random` ν•¨μλ” 0 ~ 100 κΉμ§€μ μ«μμ¤‘ ν•λ‚λ¥Ό λλ¤μΌλ΅ λ°ν™ν•λ” ν•¨μμ„.  
`takeResult` ν•¨μλ” μ •μλ¥Ό νλΌλ―Έν„°λ΅ λ°›μ•„μ„ `print`λ΅ μ¶λ ¥ν•΄μ¤.

```swift
takeResult(param: random())
```

μ„ μ½”λ“μ—μ„λ” random ν•¨μμ—μ„ λ°ν™ν• μ •μλ¥Ό νλΌλ―Έν„°λ΅ λ°›μ•„μ„ μ¶λ ¥ν•΄μ£Όκ³  μμ!

μ—¬κΈ°κΉμ§„ μ΄ν•΄κ°€ μ‰½λ‹¤.  
λ‹¤λ¥Έ μμ‹λ¥Ό λ³΄μ.

```swift
func random() -> Int {
   return Int.random(in: 0...100)
}

func takeClosure(param: () -> Int) {
   print(param())
}

takeClosure(param: { Int.random(in: 0...100) })
// λλ¤ μ •μλ¥Ό λ¦¬ν„΄
```

`takeClosure` ν•¨μλ” νλΌλ―Έν„°κ°€ μ—†κ³  Intν•μ„ λ¦¬ν„΄ν•λ” ν•¨μμ„.  
λ‹¤μ‹ λ§ν•΄, ν΄λ΅μ €λ¥Ό μ „λ‹¬ν•¨!  
ν•¨μ λ°”λ””μ—μ„ ν΄λ΅μ €λ¥Ό νΈμ¶ν•κ³ , λ¦¬ν„΄ λ κ²°κ³Όλ¥Ό μ¶λ ¥ν•κ³  μμ.

```swift
takeClosure(param: { Int.random(in: 0...100) })
```

νλΌλ―Έν„°λ΅ μΈλΌμΈ ν΄λ΅μ €λ¥Ό μ „λ‹¬ν•κ³  μμ.  
ν΄λ΅μ € μμ²΄λ¥Ό μΈμμ— μ§.μ ‘. μ „λ‹¬ν•λ” κ²ƒμ΄λ‹κΉ μΈλΌμΈ ν΄λ΅μ €μ„!

μ” κ²½μ°μ—λ”  
ν΄λ΅μ € λ‚΄λ¶€μ— ν¬ν•¨λ μ½”λ“λ” μ–Έμ  μ‹¤ν–‰λ κΉ??

ν•¨μλ¥Ό νΈμ¶μ‹ μ‹¤ν–‰λλ”κ² μ•„λ‹λΌ,  
ν•¨μ λ‚΄λ¶€μ—μ„ ν΄λ΅μ €λ¥Ό νΈμ¶ν•λ” μ‹μ μ— μ‹¤ν–‰λ¨.

μΈμλ΅ μ „λ‹¬ν•λ©΄ ν΄λ΅μ €λ” μ‹¤ν–‰λμ§€ μ•κ³ ,  
ν΄λ΅μ € μμ²΄κ°€ κ·Έλ€λ΅ μ „λ‹¬λ¨.

ν•¨μ λ‚΄λ¶€μ—μ„ `print(param())` μΌλ΅ ν΄λ΅μ €λ¥Ό νΈμ¶ν•μ§€ μ•λ”λ‹¤λ©΄??

```swift
func takeClosure(param: () -> Int) {
   print(#function)
//    print(param())
}

takeClosure(param: { Int.random(in: 0...100) })
// takeClosure(param:)
```

λ‹Ήμ—° ν΄λ΅μ €μ— ν¬ν•¨λ μ½”λ“λ” μ‹¤ν–‰λμ§€ μ•μ!  
μ—¬κΈ°μ„λ” λλ¤ μ •μκ°€ μ¶λ ¥λμ§€ μ•λ”λ‹¤λ” λ§¬μ”€!

# μ¤ν†  ν΄λ΅μ €(Auto Closure)

**νλΌλ―Έν„°λ΅ μ „λ‹¬λλ” ν‘ν„μ‹μ„ ν΄λ΅μ €λ΅ λν•‘ν•΄μ£Όλ” νΉμ„±**

`@autoclosure` λ¥Ό μ΄μ©ν•΄μ„ κµ¬ν„ν•΄λ³΄μ.

![1](https://user-images.githubusercontent.com/55340876/110321683-5f0a0600-8055-11eb-8abf-7464b9f3db00.png)

μ­??  
μ—λ¬??

νλΌλ―Έν„°κ°€ ν•¨μ νƒ€μ…μ΄λ‹κΉ ν•¨μ νΈμ¶μ‹ μΈμμ— ν΄λ΅μ €λ¥Ό μ „λ‹¬ν•΄μ•Όν•¨.  
κ·Όλ° μ—λ¬?? μ??

`() -> Int`  
νλΌλ―Έν„°κ°€ λ¶„λ… ν•¨μ νƒ€μ…μΌλ΅ μ„ μ–Έλμ—λ”λ°!!!  
λ™μΌ νƒ€μ…μ ν•¨μ/λ©”μ„λ“/ν΄λ΅μ €λ¥Ό μ „λ‹¬ν•  μ μμ§λ‚!!!  
κ·Ό λ° μ™ μ— λ¬ ? μ™Έ μ• λ ?

μμμμμ λ¦΄λ ‰μ¤  
<span style="color: red;">**νλΌλ―Έν„°κ°€ `@autoclosure` νΉμ„±μΌλ΅ μ„ μ–Έλμ–΄ μμ–΄μ„  
ν΄λ΅μ €λ¥Ό μ „λ‹¬ν•  μ μ—†λκ±°μ„!!**</span>

```swift
func takeAutoClosure(param: @autoclosure () -> Int) {
   print(param())
}

takeAutoClosure(param: Int.random(in: 0...100))
// λλ¤ μ •μ λ°ν™
```

`{}` braceλ¥Ό λΉΌλ©΄ μ •μƒμ μΌλ΅ μ‘λ™ν•¨. γ…γ….  
νΉμ„±μ„ μ΄μ©ν•λ©΄ νλΌλ―Έν„°λ΅ μ „λ‹¬ν•λ” ν‘ν„μ‹μ΄ μλ™μΌλ΅ μ¤ν†  ν΄λ΅μ €λ΅ λν•‘λ¨!

λλ¤ λ©”μ„λ“ κ²°κ³Όκ°€ μΈμλ΅ μ“°μ΄λ”κ² μ•„λ‹λΌ,  
λν•‘λ ν΄λ΅μ €κ°€ νλΌλ―Έν„°λ΅ μ „λ‹¬λλ” κ²ƒ!

μ¤ν†  ν΄λ΅μ €λ” ν‘ν„μ‹μ„ ν΄λ΅μ €λ΅ λν•‘ν•λ” λ‹¨μν• νΉμ„±.  
`{}` λ¥Ό μƒλµν•κ³  μ½”λ“λ¥Ό λ‹¨μν μ‘μ„±ν•κΈ° μ„ν•΄μ„ μ”€.

λ°λ“μ‹ ν•„μ”ν• κ²½μ°κ°€ μ•„λ‹λ©΄ μ“°μ§€λ§μ!!

## λ€ν‘μ  μ‚¬μ© μμ‹1

```swift
let rnd = random()
assert(rnd > 30)
```

`rnd` μƒμμ— μ €μ¥λ κ°’μ΄ 30 μ΄ν•λ©΄ μ‹¤ν–‰μ΄ λ©μ¶¤!

![1](https://user-images.githubusercontent.com/55340876/110322404-6e3d8380-8056-11eb-8b08-91fe52792bbc.png)

<span style="color: red;">**λ‹¨, `assert` λ” λ””λ²„κ·Έ λ¨λ“μ—μ„λ§ λ™μ‘ν•¨!  
λ¦΄λ¦¬μ¦ λ¨λ“μ—μ„λ” λ™μ‘ λ…Έλ…Έ!!**</span>

![`](https://user-images.githubusercontent.com/55340876/110322844-14898900-8057-11eb-87a9-6ee45f9ec974.png)

**[(assert μ°Έκ³ )](https://github.com/apple/swift/blob/main/stdlib/public/core/Assert.swift)**

```swift
public func assert(
   _ condition: @autoclosure () -> Bool,
   _message: @autoclosure () -> String = String(),
   file: StaticString = #file, line: UInt = #line
) {
```

`assert` λ©”μ„λ“μ— λ€ν•΄ ν΄λ¦­ν•΄μ„ λ³΄λ©΄,  
μ²«λ²μ§Έμ™€ λ‘λ²μ§Έ νλΌλ―Έν„°κ°€ `autoclosure`λ΅ μ„ μ–Έλμ–΄ μμ.

μ¦‰, μΈμλ΅ μ „λ‹¬λ  λ• ν‰κ°€λλ”κ² μ•„λ‹λΌ  
ν΄λ΅μ €λ΅ λν•‘λμ–΄μ„ ν•¨μ λ‚΄λ¶€λ΅ μ „λ‹¬μ΄ λκ³ ,  
λ””λ²„κ·Έ ν™κ²½μΈμ§€ ν™•μΈ ν›„, `true`λ΅ ν‰κ°€λλ” κ²½μ°μ—λ§!
μλ™μΌλ΅ λν•‘λ ν΄λ΅μ €λ¥Ό νΈμ¶ν•κ³  μμ.

λ°”λ΅ μ” μ‹μ μ— `rnd > 30` μ—¬κΈ°μ„ μ „λ‹¬ν• μ½”λ“κ°€ μ‹¤ν–‰λλ” κ²ƒ!  
(μ” ν¨ν„΄μ€ κµ³μ΄ μ¤ν†  ν΄λ΅μ €κ°€ μ•„λ‹λΌλ„ κµ¬ν„μ΄ κ°€λ¥ν•κΈ΄ ν•¨)

μ¤ν†  ν΄λ΅μ €λ” λ“λ³΄λ‹¤ μ‹¤μ΄ λ§μ€ νΉμ„±μ΄λΌ μ‹ μ¤‘ν μ¨μ•Όν•¨μ”!!

## λ€ν‘μ  μ‚¬μ© μμ‹2

λ‹¤λ¥Έ μμ‹λ΅ λΉ„λ™κΈ°λ¥Ό μ¨λ³΄μ.

![1](https://user-images.githubusercontent.com/55340876/110323493-04be7480-8058-11eb-852d-75ebddc6f3b6.png)

λΉ„λ™κΈ° λΈ”λ­μ—μ„ νΈμ¶ν•λ©΄  
escaping ν΄λ΅μ €κ°€ non-escaping νλΌλ―Έν„°λ¥Ό μΊ΅μ³ν•κ³  μλ‹¤κ³  μ—λ¬ λΏ!  
μ¤ν†  ν΄λ΅μ € νΉμ„±μ€ κΈ°λ³Έμ μΌλ΅ non-escaping νΉμ„±μ„ κ°–κ³  μμ.

λΉ„λ™κΈ°λ΅ νΈμ¶ν•κ³  μ‹¶λ‹¤λ©΄??

```swift
func takeAutoClosure(param: @autoclosure @escaping () -> Int) {
   print(#function)

   DispatchQueue.main.asyncAfter(deadline: .now() + 1) {
      print(param())
   }
}

takeAutoClosure(param: Int.random(in: 0...100))
// takeAutoClosure(param:)
// 1μ΄ μ§€μ—° ν›„, λλ¤ μ •μ λ°ν™
```

`@autoclosure` νΉμ„± λ’¤μ— `@escaping` νΉμ„±μ„ μ¶”κ°€ν•΄μ¤!  
κ·ΈλΌ 1μ΄ μ§€μ—° ν›„, λλ¤ μ •μκ°€ λ°ν™ λμ§€λ !

μ΄λ²μ—” ν΄λ΅μ €μ— νλΌλ―Έν„° νƒ€μ…μ„ μ¶”κ°€ν•΄λ³΄μ.

![1](https://user-images.githubusercontent.com/55340876/110324158-f6248d00-8058-11eb-86d3-3622bfd53b32.png)

μ—λ¬;;

μ¤ν†  ν΄λ΅μ € νΉμ„±μ„ μ¶”κ°€ν•λ©΄,  
ν΄λ΅μ €μ— νλΌλ―Έν„°λ¥Ό μ¶”κ°€ν•  μ μ—†μ!!!  
but λ¦¬ν„΄νƒ€μ…μ€ μμ λ΅­κ² μ„ μ–Έ κ°€-λ¥!!!

`() -> Int`  
νλΌλ―Έν„°λ¥Ό λΉ„μ–΄λ†“κ³ μ„λ§ μ„ μ–Έ κ°€λ¥ν•λ‹¨ λ§¬μ”€μ„.
