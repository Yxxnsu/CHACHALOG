---
title: '🕊 [Swift] 단락 평가 / 사이드 이펙트'
date: 2021-01-07 03:00:00
category: 'Swift'
draft: false
showToc: true
---

# 단락 평가(Short-circuit Evaluation)
조건식 평가방법을 알아봅세!

논리 연산자들은 결과 도출에 필요한 최소한의 논리식만 평가하고,  
이 평가 방식을 **단락 평가**라고 말함

![1](https://user-images.githubusercontent.com/55340876/110206561-cb540080-7ec1-11eb-84cf-770b553349ef.png)

상단 코드에서는  
`||` (or) 연산자라서,  
updateLeft 가 true니까 updateRight를 호출하지 않고 바로 평가함.

<!-- </br> -->

> <틈새 설명>  
'변수의 초기화'란 변수를 선언한 후 그 변수에 처음으로 어떠한 값을 저장하는 것을 말한다.  
인스턴스의 생성시 멤버 변수는 초기화 하지 않아도 데이터 타입에 맞는 기본값으로 자동 초기화가 되지만  
지역변수는 사용하기 전에 꼭 초기화를 시켜줘야만 한다.  

<!-- </br> -->

스위프트는 논리식을 평가할 때,  
결과를 얻는데 필요한 최소한의 코드만 실행함!

 

이미 결과를 얻었다면?  
나머지 코드는 실행하지 않는거임.


![1](https://user-images.githubusercontent.com/55340876/110206807-5386d580-7ec3-11eb-8e22-9501e2504ace.png)


상단 코드는 updateLeft 함수를 실행하고 일단 a에 1을 더한 후, false를 리턴함.  

 

지금 `||` (or) 연산자로 비교를 하고 있으니까  
updateLeft 는 false니까 updateRight까지 실행을 해서 a와 b에 각 1을 더한 후, 리턴함

![1](https://user-images.githubusercontent.com/55340876/110206836-774a1b80-7ec3-11eb-8a77-d5cd41804e91.png)

`&&` (and) 연산자는 말할 것도 없지않음??  
이미 첫번 째 함수의 결과가 false니까 updateLeft 함수만 실행하고 끝!!


# 부작용(Side Effect)
**코드의 실행결과로 인해서 값 또는 상태가 변경되는 것**을 말함

위에서 마지막 코드를 다시 봅세.  
a가 2로 바뀌고 b는 그대로 유지가 됨  
값이 한번만 바꼈으니까 한번의 **사이드 이펙트**가 발생한것!

```swift
a
b
```

위 코드는 저장 값을 출력만 하는거지, 값을 바꾸는 것은 아니니까 사이드 이펙트는 발생하지 않음

하지만 마지막 줄에

```swift
a = 1
```

이라는 코드를 사용하면 어떨까?  
이건 값이 바뀌는거니까 사이드 이펙트가 한번 더 발생하게 되는거임!

사이드 이펙트는 항상 예측가능한 범위 내에 있어야 하고,  
우리가 의도한 결과를 도출해야함

가정을 해봅세.

![1](https://user-images.githubusercontent.com/55340876/110206888-bd9f7a80-7ec3-11eb-9d00-789b8e1c2364.png)

상단 코드는 논리식에 관계없이 updateLeft() 와 updateRight() 는 항상 호출이 되고,  
if문에서도 사이드 이펙트는 발생되지 않음 (상수에 저장된 불리언 값을 읽고만 있으니까)

**앞으로 논리식을 작성할 때에는 논리적인 오류 발생을 대비해서**  
**가능하다면 사이드 이펙트가 발생하는 코드는 이전으로 빼두자!**
