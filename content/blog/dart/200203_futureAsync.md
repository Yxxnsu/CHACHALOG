---
title: 'ğŸ“– [Dart] future & async-await'
date: 2020-02-03 13:00:00
category: 'Dart'
draft: false 
showToc: true
---

<!-- Draft Post -->
<!-- Draft Post -->
<!-- Draft Post -->
<!-- Draft Post -->
<!-- Draft Post -->

# Async (ë¹„ë™ê¸°)  
ì¸í„°ë„·ì´ë‚˜ dbì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ë•Œ(API)  
ì˜¤ë˜ê±¸ë¦¬ë‹ˆê¹Œ í”„ë¡œê·¸ë¨ì´ ëŒë‹¤ ë§‰íˆëŠ”ê±¸ í•´ê²°í•´ì£¼ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ë²•  

>ê°„ë‹¨í•œ ì •ì˜  
>ì¤„ì„ë§ : sync(ë™ê¸°) / **Async(ë¹„ë™ê¸°)**  
>ë™ê¸°ì  ì¼ì²˜ë¦¬ ë°©ì‹ : ìˆœì°¨ì ìœ¼ë¡œ ì¼ì„ ìŠ¤ìŠ¤ë¡œ ëë‚´ ë‚˜ê°€ëŠ” ë°©ì‹  
>**ë¹„ë™ê¸°ì  ì¼ì²˜ë¦¬ ë°©ì‹ : í•´ì•¼ í•  ì¼ì„ ìœ„ì„í•˜ê³  ê¸°ë‹¤ë¦¬ëŠ” ë°©ì‹**  


Dart ì–¸ì–´ëŠ” í”„ë¡œê·¸ë¨ í•˜ë‚˜ë‹¹ threadë¥¼ í•˜ë‚˜ë§Œ ì“¸ ìˆ˜ ìˆìŒ  
thread ë¥¼ ì¼ì¢…ì˜ íŒŒì´í”„ë¼ê³  ìƒê°í•˜ë©´ ë˜ëŠ”ë°,  
íŒŒì´í”„ ì•ˆì— ì‘ì—…ì´ í•œìª½ìœ¼ë¡œ ë“¤ì–´ê°€ì„œ ë‹¤ë¥¸ í•œìª½ìœ¼ë¡œ ë‚˜ì˜¤ëŠ”ê±°ì•¼.  

ë¬¸ì œëŠ”  
í•œìª½ìœ¼ë¡œ ë“¤ì–´ê°€ì„œ ë‚˜ì˜¬ ë•Œ,   
ì‘ì—…ì‹œê°„ì´ ìˆì„ ê±° ì•„ëƒ?  
ì–´ë–¤ ê±´ ë¹¨ë¦¬ ëë‚˜ê³  ì–´ë–¤ ê±´ ì˜¤ë˜ ê±¸ë¦¬ê³ ..  
ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ë©´ íŒŒì´í”„ ì¤‘ê°„ì—ì„œ ë§‰í˜€ì„œ ë‹¤ë¥¸ ì¼ì²˜ë¦¬ë„ ëª»í•˜ê²Œ ë˜ë‹ˆê¹Œ  
ê·¸ëŸ°ê±¸ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ Async í”„ë¡œê·¸ë¨ì´ ë‚˜ì˜¨ê±°ì•¼!  

Dart ì–¸ì–´ì—ëŠ” Async í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ëŠ” 2ê°€ì§€ ë°©ë²•ì´ ìˆì–´.  

- **future API ì‚¬ìš©í•˜ëŠ” ë°©ë²•**  
  - ì˜ˆë¥¼ ë“¤ì–´, ì¸í„°ë„·ì— ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ëŠ”ë‹¤ê³  í•´ë´.   
 http ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ë°›ì„ê±°ì•¼.  
 ìš”ì²­ì„ ì§€ê¸ˆ í–ˆì–´!  
 ìš”ì²­ì„ í•˜ë‹ˆê¹Œ ê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë‚˜ì—ê²Œ future objectë¥¼ ì¤¬ëŠ”ë° ì•„ì§ ì—´ë¦° ìƒíƒœëŠ” ì•„ë‹ˆì•¼.  
 ì™„ë£Œê°€ ë˜ì§€ ì•Šì€ ìƒíƒœì¸ê²¨!!  
 ê·¸ê±¸ ì¼ë‹¨ ë‚˜ëŠ” í•œìª½ì— ë‘ê³  ë‹¤ë¥¸ ì‘ì—…ì„ ì¼ë‹¨ ê³„ì† ì²˜ë¦¬ë¥¼ í•´.  
 ê·¸ëŸ¬ë‹¤ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œê°€ ë‹¤ ì™„ë£Œë¬ë‹¤ê³  ì‹ í˜¸ê°€ ì™€ì„œ future objectê°€ ì—´ë ¤!  
 ê·¸ëŸ¼ ê·¸ ì•ˆì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ê°€ ë”± ë‚˜ì˜¤ëŠ”ë°,  
 ì´ ë°©ë²•ì—ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì§€!  
 
 **1. ì™„ë£Œë˜ì§€ ì•Šì€ future object ìƒíƒœ**  
 **2. ì™„ë£Œ ëœ errorë‚˜ data ìƒíƒœ**  
 
- **Async await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•**  
  - ì´ê²Œ ë‚˜ì˜¨ ì´ìœ ëŠ”,  
 ë‚˜ëŠ” future object ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‹¤ìŒ ì‘ì—…ì„ í•˜ê³ ì‹¶ì€ë°?!!!  
 ì´ê±° ë¨¼ì € í•˜ê³  ë‹¤ìŒêº¼ í• ê±°ë¼ê³ !!!  
 ë¥¼ ìœ„í•´ì„œ ë‚˜ì˜¨ê±°ì•¼. ê°€ë¦¿??!  

>**ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì !!  
>ë¹„ë™ê¸°ì½”ë“œëŠ” ì‘ì—…ì´ ëë‚˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ í”„ë¡œê·¸ë¨ì´ ë‹¤ë¥¸ ì‘ì—…ì„ ì™„ë£Œí•˜ë„ë¡ í•œë‹¤.  
>DartëŠ” Futureë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì‘ì—…ì˜ ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.  
>futureë¡œ ì‘ì—…í•˜ë ¤ë©´ asyncì™€ await ë˜ëŠ” Future APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**  
> - **ë‹¤íŠ¸ ì½”ë“œëŠ” ë‹¨ì¼ thread ì—ì„œ ì‹¤í–‰**  
>- **threadë¥¼ ì°¨ë‹¨í•˜ëŠ” ì½”ë“œëŠ” í”„ë¡œê·¸ë¨ì„ ì •ì§€ì‹œí‚¬ ìˆ˜ ìˆìŒ**  
 _(ì¤‘ê°„ì— ë§‰íˆë©´ ë‹¤ë¥¸ ì‘ì—…ë„ ëª»í•˜ê³  í”„ë¡œê·¸ë¨ì´ ë©ˆì¶”ë‹ˆê¹Œ)_  
>- **futureëŠ” asyncì½”ë“œì˜ ê²°ê³¼ë¥¼ ë‚˜íƒ€ëƒ„. ì²˜ë¦¬ ë˜ëŠ” ì…ì¶œë ¥ì€ ë‚˜ì¤‘ì— ì™„ë£Œë¨**  
 _(ì„ ë¬¼ë°•ìŠ¤ë¼ê³  ìƒê°í•´. ê·¸ ë°•ìŠ¤ëŠ” ë‚˜ì¤‘ì— ì—´ë ¤ì„œ ì—ëŸ¬ë‚˜ ë°ì´í„°ê°€ ë‚˜ì˜¤ë‹ˆê¹Œ)_  
>- **futureê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ë‹¨í•˜ë ¤ë©´ async í•¨ìˆ˜ì—ì„œ awaitë¥¼ ì‚¬ìš©í•˜ë©´ ë¨**  
 _(futureê°€ return í•˜ëŠ” í•¨ìˆ˜ê°€ ìˆì„ë•Œ, ê·¸ í•¨ìˆ˜ëŠ” ì˜¤ë˜ ê±¸ë¦¬ì–ì•„? ê·¼ë° ê·¸ ì˜¤ëœ ì‹œê°„ì„ ê¸°ë‹¤ë¦´ê±°ëƒ,   ì•„ë‹ˆë©´ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë¨¼ì € í• ê±°ëƒ~ ì´ê±°ì§€!)_  
>- **async í•¨ìˆ˜ì—ì„œ try-catchë¥¼ ì‚¬ìš©í•´ì„œ ì—ëŸ¬ë¥¼ ì¡ìŒ**  

---  

# futures & async-await  
  
**ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œ í”„ë¡œê·¸ë¨ì´ ì¤‘ê°„ì— ë©ˆì¶”ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì–´!**  

```go
// Synchronous code
void printDailyNewsDigest() {
  var newsDigest = gatherNewsReports(); // Can take a while.
  print(newsDigest);
}

main() {
  printDailyNewsDigest();
  printWinningLotteryNumbers();
  printWeatherForecast();
  printBaseballScore();
}

...
```  

**ì´ í”„ë¡œê·¸ë¨ì€ ì˜¤ëŠ˜ì˜ ë‰´ìŠ¤ë¥¼ ìˆ˜ì§‘í•˜ê³  ë³´ì—¬ì¤€ ë‹¤ìŒ, ì—¬ëŸ¬ê°€ì§€ ë‹¤ë¥¸ í•­ëª©ë“¤ë„ ë³´ì—¬ì¤˜.**  

ìƒë‹¨ ì½”ë“œë¥¼ í•œ ë²ˆ ì­‰ ë³´ì.  
```var newsDigest = gatherNewsReports();```   
ì´ ë¶€ë¶„ì€ ì„œë²„ì—ì„œ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¶€ë¶„ì¸ë° ì´ê²Œ ì—„ì²­ ì˜¤ë˜ê±¸ë¦´ ìˆ˜ ìˆì–´!  
ê·¼ë° ì§€ê¸ˆ ì½”ë“œ ìƒí™©ì€ íŠ¹ë³„íˆ async í”„ë¡œê·¸ë¨ì„ ì“°ëŠ” ê²ƒë„ ì•„ë‹ˆê³ ..  
ê·¸ëŒ€ë¡œ ê¸°ë‹¤ë ¸ë‹¤ê°€ í”„ë¦°íŠ¸ í•œë‹¤ëŠ” ì½”ë“œë¼ê³  ë³´ì—¬ì§€ì§€?  
  
ë°‘ì— ```main(){}``` ë¶€ë¶„ ì²«ì¤„ì—ëŠ” ```printDailyNewsDigest();```ê°€ ìˆê³ ,  
ë‚˜ë¨¸ì§€ í•­ëª©ë“¤ë„ ì­‰ ë‚˜ì—´ë˜ì–´ ìˆëŠ”ë°  
ì—¬ê¸°ì„œ ë¬¸ì œì ì´ ë­˜ê¹Œ?!  
  
ê·¸ë˜!   
ë‹¤ë¥¸ í•­ëª©ì´ ë³´ì—¬ì§ˆë¼ë©´ 
ìœ„ì— ```printDailyNewsDigest();``` ì´ ì‘ì—…ì´ ì™„ë£Œë˜ì„œ ë³´ì—¬ì§ˆ ë•Œê¹Œì§€ëŠ”   
ì•„ë¬´ê²ƒë„ ì‘ì—…ì„ ëª»í•œë‹¤ëŠ”ê±°ì•¼... ì™“ë”......ğŸ¤¯  

ê·¸ê±¸ ë°©ì§€í•˜ì§€ ìœ„í•´ async í”„ë¡œê·¸ë˜ë°ì„ ë°°ì›Œë³´ìê·œ!!  

```go
import 'dart:async';

Future<void> printDailyNewsDigest() async { //2ï¸âƒ£
  var newsDigest = await gatherNewsReports(); //4ï¸âƒ£
  print(newsDigest); //5ï¸âƒ£
}

main() { //0ï¸âƒ£
  printDailyNewsDigest(); //1ï¸âƒ£
  printWinningLotteryNumbers();
  printWeatherForecast();
  printBaseballScore();
}

printWinningLotteryNumbers() { //ë¡œë˜ë„˜ë²„
  print('Winning lotto numbers: [23, 63, 87, 26, 2]');
}

printWeatherForecast() { //ë‚ ì”¨
  print("Tomorrow's forecast: 70F, sunny.");
}

printBaseballScore() { //ì•¼êµ¬ì ìˆ˜
  print('Baseball score: Red Sox 10, Yankees 0');
}

const news = '<gathered news goes here>'; //ì´ê±´ í•œì¤„ì§œë¦¬ ë‰´ìŠ¤ì§€ë§Œ ì—„ì²­ ë°©ëŒ€í•˜ë‹¤ê³  ìƒìƒí•´ë´!
const oneSecond = Duration(seconds: 1);

//ì´ ê¸°ëŠ¥ì´ ë” ë³µì¡í•˜ê³  ëŠë¦¬ë‹¤ê³  ìƒìƒí•´ë´. :)
Future<String> gatherNewsReports() => //3ï¸âƒ£
    Future.delayed(oneSecond, () => news); //future ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ë”œë ˆì´ë¥¼ í•˜ëŠ” ë¶€ë¶„. 1ì´ˆë™ì•ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‰´ìŠ¤ë¥¼ ë¦¬í„´ì„ í•´ë¼~ ì´ë§ì´ì•¼!

```  
  
```Future<String> gatherNewsReports() =>```  = Future<ë‚˜ì¤‘ì— ë°›ì„ ë°ì´í„° íƒ€ì…>  
  
**0ï¸âƒ£ ~ 5ï¸âƒ£ ìˆœì„œë¥¼ ì°¨ë¡€ëŒ€ë¡œ í™•ì¸í•´ë´!**  

### async-await ì‚¬ìš©ì‹œ ê²°ê³¼  

**futureê°€ ì™„ì„±ë  ë•Œê¹Œì§€ await!! ê¸°ë‹¤ë¦° í›„ì— ì™„ë£Œë˜ë©´ í”„ë¦°íŠ¸ë¥¼ í•´ì£¼ëŠ”ê±°ì§€!**  

![1](https://user-images.githubusercontent.com/55340876/74588414-a2a36380-503f-11ea-818b-c9b59e22d331.gif)
  

### async-await ì‚¬ìš©ì•ˆí–ˆì„ ë•Œ ê²°ê³¼ & ì°¨ì´  

**ì„ ë¬¼ë°•ìŠ¤ê°€ ì—´ë¦¬ì§€ ì•Šì€ì±„ë¡œ í”„ë¦°íŠ¸ ë˜ëŠ”ê²Œ ë³´ì´ì§€?!**  


![2](https://user-images.githubusercontent.com/55340876/74588417-a800ae00-503f-11ea-9d90-ac7b11db7e1d.gif)

---  
  

# async í•¨ìˆ˜ì—ì„œ try-catchë¥¼ ì‚¬ìš©í•´ì„œ ì—ëŸ¬ ì¡ê¸°  
  
ë§Œì•½ì— ì—ëŸ¬ ë°œìƒ í™•ë¥ ì´ ìˆë‹¤ë©´?!  
try-catch ë¸”ëŸ­ì„ ì‚¬ìš©í•´ì„œ ì—ëŸ¬ë¥¼ ì¡ëŠ”ê±°ì§€.  
  
```go
import 'dart:async';

Future<void> printDailyNewsDigest() async {
  try{
  var newsDigest = await gatherNewsReports();
  print(newsDigest);
  }catch(e){ //error object ê°€ e ë¡œ ì „ë‹¬ë¨
    print(e.toString()); //ê·¸ eë¥¼ ì‚¬ìš©í•´ì„œ í”„ë¦°íŠ¸í•˜ì—¬ ì—ëŸ¬ ë©”ì„¸ì§€ í™•ì¸
  }
}

...
```  

# async-await í‚¤ì›Œë“œ ë§ê³  future API ìì²´ ì‚¬ìš©í•˜ê¸°  

async-await ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ,  
ì˜¤ë¥¸ìª½ í•˜ë‹¨ Documentation ë¶€ë¶„ ë³´ë©´ ```newsDigest``` ê°€ String ìœ¼ë¡œ í™•ì¸.  

<img width="770" alt="3" src="https://user-images.githubusercontent.com/55340876/74588419-aa630800-503f-11ea-8d5d-387fdfb198c0.png">

ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œ,  
```newsDigest``` ê°€ Future<String> ìœ¼ë¡œ í™•ì¸.  

<img width="838" alt="4" src="https://user-images.githubusercontent.com/55340876/74588421-aafb9e80-503f-11ea-9c93-85df408a0001.png">
  
  
<img width="838" alt="5" src="https://user-images.githubusercontent.com/55340876/74588422-ab943500-503f-11ea-8526-48db8b2f9a7e.png">

```go
import 'dart:async';

Future<void> printDailyNewsDigest() {
  var newsDigest = gatherNewsReports();
  newsDigest.then((value) => { //futureê°€ ê²°ê³¼ë¥¼ ë°›ì•˜ì„ë•Œ valueë¡œ ê²°ê³¼ë¥¼ ë°›ì•„ì„œ
    print(value) //ê·¸ ê²°ê³¼ë¥¼ í”„ë¦°íŠ¸
  });
  
}
  
...
```
 
future API ìì²´ë¥¼ ì‚¬ìš©í•´ë„ ê²°ê³¼ëŠ” ë™ì¼í•´!  
  

![6](https://user-images.githubusercontent.com/55340876/74588423-ac2ccb80-503f-11ea-86f6-ea5b1afb2326.gif)
  
ì—ëŸ¬ ì¡ì„ ë•ŒëŠ”,  

<img width="805" alt="7" src="https://user-images.githubusercontent.com/55340876/74588425-ad5df880-503f-11ea-8f93-43e68df99c94.png">


  
```go
import 'dart:async';

Future<void> printDailyNewsDigest() {
  var newsDigest = gatherNewsReports();
  newsDigest.then((value) => {
    print(value)
  });
  newsDigest.catchError((e) => {
    print(e)
  });
  
}
  
...
```

  
ìš”ë¡ ì‹ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ë„ ìˆê³ !!  

async-await ëŠ” ì½œë°±ì—†ì´ ì°¨ë¡€ì°¨ë¡€ ê¸°ë‹¤ë ¸ë‹¤ ê°€ì§€ë§Œ,  
**thenì€ ì½”ë“œì•ˆì— ê°‡í˜€ìˆì–´ì„œ ì € valueë¥¼ ë°–ì—ì„œ ì ‘ê·¼í•˜ì§€ ëª»í•´!  
ì°¨ì´ì ì„ ë¶„ëª…íˆ ì•Œê³  ì‚¬ìš©í•˜ì!**  

---
---  

# Reference  
- [ë”ì½”ë”©íŒŒíŒŒ ìœ íŠœë¸Œ](http://bit.ly/TheCodingPapa)
- [getinthereë‹˜ì˜ ë¸”ë¡œê·¸ (ì„¤ëª… ë² ë¦¬ë‚˜ì´ìŠ¤! ğŸ‘ğŸ»)](https://blog.naver.com/getinthere/221663923222)
- [Dart ê³µì‹ë¬¸ì„œ](https://dart.dev/)



