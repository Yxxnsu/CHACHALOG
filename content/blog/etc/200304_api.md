---
title: '🔫 [etc] API / RESTful API'
date: 2020-03-04 00:20:00
category: 'etc'
draft: false
showToc: true
---

<!-- 임시 저장 글 -->
<!-- Draft Post -->
<!-- Draft Post -->
<!-- Draft Post -->
<!-- Draft Post -->
<!-- Draft Post -->

# API

**API (Application Programming Interface) 응용 프로그래밍 인터페이스**  

<br/>

위키백과를 빌리자면 
> 응용 프로그램에서 사용할 수 있도록,   
> 운영 체제나 프로그래밍 언어가 제공하는 기능을 제어할 수 있게 만든 인터페이스를 뜻한다.   
> 주로 파일 제어, 창 제어, 화상 처리, 문자 제어 등을 위한 인터페이스를 제공한다.

---

또다른 예를 들면,

여러분이 멋진 레스토랑에 있다고 가정해봅시다.   

>점원이 가져다준 메뉴판을 보면서 먹음직스러운 스테이크를 고르면,   
점원이 주문을 받아 요리사에 요청을 할 텐데요.   
그러면 요리사는 정성껏 스테이크를 만들어 점원에게 주고,   
여러분은 점원이 가져다준 맛있는 음식을 먹을 수 있게 됩니다.

여기서 점원의 역할을 한 번 살펴보겠습니다.  

점원은 손님에게 메뉴를 알려주고, 주방에 주문받은 요리를 요청합니다.   
그다음 주방에서 완성된 요리를 손님께 다시 전달하지요.   
API는 점원과 같은 역할을 합니다.  

API는 손님(프로그램)이 주문할 수 있게 메뉴(명령 목록)를 정리하고,   
주문(명령)을 받으면 요리사(응용프로그램)와 상호작용하여 요청된 메뉴(명령에 대한 값)를 전달합니다.  

쉽게 말해,   
**API는 프로그램들이 서로 상호작용하는 것을 도와주는 매개체로 볼 수 있습니다.**

## API 역할

**API는 서버와 데이터베이스에 대한 출입구 역할을 한다.**  
   - 데이터베이스에는 소중한 정보들이 저장되는데요.   
모든 사람들이 이 데이터베이스에 접근할 수 있으면 안 되겠지요.   
API는 이를 방지하기 위해 여러분이 가진 서버와 데이터베이스에 대한 출입구 역할을 하며,   
허용된 사람들에게만 접근성을 부여해줍니다.

<br/>

**API는 애플리케이션과 기기가 원활하게 통신할 수 있도록 한다.**    
   - 여기서 애플리케이션이란 우리가 흔히 알고 있는 스마트폰 어플이나 프로그램을 말합니다.   
API는 애플리케이션과 기기가 데이터를 원활히 주고받을 수 있도록 돕는 역할을 합니다.

<br/>

**API는 모든 접속을 표준화한다.**  
   - API는 모든 접속을 표준화하기 때문에 기계/ 운영체제 등과 상관없이 누구나 동일한 액세스를 얻을 수 있습니다.   
쉽게 말해,   
API는 범용 플러그처럼 작동한다고 볼 수 있습니다.

<br/>

## API 유형

1) private API  
   - private API는 내부 API로, 회사 개발자가 자체 제품과 서비스를 개선하기 위해 내부적으로 발행합니다.   
따라서 제 3자에게 노출되지 않습니다.

2) public API  
   - public API는 개방형 API로, 모두에게 공개됩니다.   
누구나 제한 없이 API를 사용할 수 있는 게 특징입니다.

3) partner API  
   - partner API는 기업이 데이터 공유에 동의하는 특정인들만 사용할 수 있습니다.   
  비즈니스 관계에서 사용되는 편이며,   
종종 파트너 회사 간에 소프트웨어를 통합하기 위해 사용됩니다.

## API 사용하면 뭐가 좋을까?
API를 사용하면 많은 이점들이 있는데요.   
Private API를 이용할 경우,   
개발자들이 애플리케이션 코드를 작성하는 방법을 표준화함으로써,   
간소화되고 빠른 프로세스 처리를 가능하게 합니다.   

또한,   
소프트 웨어를 통합하고자 할 때는 개발자들 간의 협업을 용이하게 만들어줄 수 있죠.  
public API와 partner API 를 사용하면,   
기업은 타사 데이터를 활용하여 브랜드 인지도를 높일 수 있습니다.   
뿐만 아니라 고객 데이터베이스를 확장하여 전환율까지 높일 수 있지요.


## 정리

<br/>

따라서 한 유형의 API 는 ``Flutter`` 와 같은 소프트웨어를 작성하는게 사용되는 API 이다.  

다른 유형으로는,  
외부 시스템과 상호 작용할 수 있는 API 인 ``틴더`` 앱도 있다.  
가령 페이스북에 요청해서 친구 공유를 할 때.  

``Tinder`` ------**GET / Request**------> ``Facebook``  
틴더는 페북에 특정 정보를 요청하고,  

``Facebook`` ------**Response**------> ``Tinder``  
페북은 응답을 주고 우리는 사용자를 확인할 수 있다.  

음..  
상호작용의 예를 들어  
우리가 던킨 도넛에 가서 도넛을 요청하고 돈을 넘겨준다.  
그 후 답례로 도넛을 받는다.  

무언가를 요구할 수 없는 것도 있다.  
은행가서 은행원에게 다짜고짜 100만원 달라고 할 수 없는 것처럼.
그래서 우리는 요청을 하면서 키를 주고   
은행원은 그 키를 가져다가 잠금해제를 하고 돈을 전달해준다.  

이 경우 은행원은 나와 금고 사이의 인터페이스.  
즉, **API** 이고,  
잠금해제할 때 필요한 것 = **API Key**   
라고 생각하면 된다.

<br/>

앱이 다른 사람의 프로그램이나 다른 사람의 서버와 상호작용할 때  
API 는 중간에 인터페이스를 통해 상호작용을 지시한다.  

유효한 요청이면 유효한 답변을 주고  
그렇지 않은 잘못된 요청이라면 404와 같은 에러 코드를 반환한다.  



# RESTful HTTP API 구조 및 핵심 개념

## 기본 배경 지식

- URI:
   - Uniform Resource Identifier
   - 해당 사이트의 특정 자원의 위치를 나타내는 유일한 주소.
   - ``/login``, ``/news``
   - ``https://finance.naver.com/marketindex/``
  

- HTTP Method
   - HTTP request가 의도하는 action을 정의한것.
   - ``POST``, ``GET`` 등등.

- Payload
   - HTTP request에서 보내는 데이터 (body)

## REpresentational State Transfer

- 웹상에서 사용되는 여러 리소스를 HTTP URI로 표현하고 그 리소스에 대한 행위를 HTTP Method로 정의하는 방식.
   - 즉, 리소스(HTTP URI로 정의된)를 어떻게 한다(HTTP Method + Payload)를 구조적으로 깔끔하게 표현하는것.
   - Method는 주로 ``GET``과 ``POST``만 사용한다.
   - ``PUT``과 ``DELETE`` 등도 사용하는 곳도 있지만, 그냥 ``GET``과 ``POST``만 사용하는 것이 단순하기 때문에 ``GET``과 ``POST``만 사용하는 추세.
- 예를 들어, 삼성전자 주식 정보를 받기 위한 HTTP 요청:
   - HTTP GET ``https://api.trueshort.com/stock/005930``
- 유저의 보유 주식 종목들을 DB에 저장하는 HTTP 요청:

```
HTTP POST https://api.trueshort.com/user/portfolio

{
    "user_id" : 1,
    "stocks": [ 
        "005930",
        "298730",
        "378900"
    ]
}
```

## RESTful API의 장점
- 여러 장점들이 있지만, 사실 그중 가장 명확한 장점은 바로 ``self-descriptiveness`` 이다.
- RESTful API는 그 자체만으로도 API의 목적이 쉽게 이해가 된다.
    - 예를 들어, 위의 HTTP GET ``https://api.trueshort.com/stock/005930`` 요청의 경우,   
  문서나 주석이 없이도 https://api.trueshort.com 라는 API에서   
  삼성전자 주식에 관한 정보를 HTTP 요청을 통해 받아오는 구나" 라는 해석이 쉽게 가능하다.  


## RESTful API를 개발할때 유의 할점
- /(슬래시)는 계층 관계를 나타낼때 사용된다.
    - 예를 들어, ``https://api.trueshort.com/kospi/stock/005930`` 이라는 구조라면,  
   KOSPI에 속해있는 주식(Stock) 중 삼성전자(005930)을 나타내는 것이다.
    - ``https://api.shopping.com/books/novel/stephenking`` 이라는 구조 이라면,   
  책들중 소설 그리고 소설중 Stephen King의 소설을 나타내는 구조이다.
- URI에 _(underscore)는 주로 포함하지않고 또한 영어 대문자보다 소문자를 쓴다.   
  그리고 너무 긴 단어는 잘 사용하지 않는다. 이 모든건 가독성을 높이기 위해서다.
- URI는 명사를 사용한다.
    - ``/books/novel/stephenking`` 이라고 하지 ``/books/novel/get-stephenking`` 이라고 잘 하지 않는다.
    - 그 이유는 동사는 ``GET``, ``POST`` 같은 HTTP Method를 통해 표현하기 때문이다.





<br/>


---
---

# Reference  
- [Angela Yu 강의(유료)](https://www.udemy.com/course/flutter-bootcamp-with-dart/)
- [API란?](https://1boon.kakao.com/wishket/5e4b7f0689f104270d5887b1)